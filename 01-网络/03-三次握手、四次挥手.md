# 20200812网络技术提升 
# 1 三次握手

**客户端向服务器端进行数据请求？**

> 客户端需要明确的是  服务器端具有 接收信息的能力 以及发送信息的能力
> 
> 服务器端需要明确：  客户端也具有 接收信息的能力以及发送信息的能力

**三次握手：**

> 建立连接的过程。

- 客户端向服务器端发出一个建立连接的请求        我要向你发送请求信息了  你能接受到吗？

SYN = 1 、seq = n （n 为任意的一个数字，请求的编号）

（服务器端可以明确客户端具有发送信息的能力）

- 服务器端向客户端进行一个回应      我接受到你的请求了       我接受到的请求编号的响应， 可以进行连接

的响应，可以进行连接

SYN = 1 同意进行连接，ack = n + 1 , seq = m 

（客户端可以明确明确服务器具有接收和发送信息的能力了）

- 客户端接收到服务器端的响应，给服务器端的一个回应        我知道你能收到我的信息了  下面我开始发送了

SYN = 0， ack = m + 1 ,seq = n + 1 

**注意：**

客户端、服务端各自的 seq编号累加。

# 2 四次挥手

**断开连接需要明确?**

> 双方均已发送完信息。

**四次挥手：**

> 断开连接的过程。客户端发起的。

-  客户端向服务器端发出断开连接的请求   我的请求参数已经发送完了， 我要断开了

（服务器端能明确， 客户端的数据已经全部发送完成，要断开连接）

- 服务器端向客户端回应断开连接的响应， 我知道你的数据已经发送完了，你要断开了，但是我这边还没有处理完

（客户端能明确： 服务器端已经知道我的数据传递完了并且我要断开连接了）

- 服务器端向客户端发起断开的信息，   我的数据也都处理完了并且返回给你了， 我这里可以断开了

（客户端能明确： 服务器端已经把所有的信息给我了，他可以断开连接了）

- 客户端向服务器端发起： 我知道你可以断开了， 我断开了

# 3 跨域

**跨域问题？**

> ajax 是受到浏览器的安全机制： 同源策略限制的；浏览器的拦截是在响应的过程当中；

## 3.1 客户端和服务器端的跨域

- jsonp ： json and padding    

> 原理： 动态的创建script标签 script标签身上的src属性不收同源策略的限制
> 
> 要求： 后端拼接数据

- CORS跨域：  cross origin resource sharing  跨域资源共享

> 这种跨域方式仍然是ajax请求
> 
> 服务器端设置三个响应头
> 
> ` "Access-Control-Allow-Origin": "*",`
> 
> ` "Access-Control-Allow-Methods": "PUT,DELETE",`

- 服务器端代理

## 3.2 客户端和客户端之间的跨域 

接收数据的window.postMessage(当前页面发出的数据, 允许拿到这个数据的源地址)

接收方 接收数据通过window.onmessage 事件接收